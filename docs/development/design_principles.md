# プロジェクト設計原則

## 1. はじめに

このドキュメントは、Remote Visual Guidanceプロジェクトにおいて高品質で保守性・拡張性の高いソフトウェアを開発・維持するために遵守すべき基本的な設計原則をまとめたものです。

このプロジェクトは**プロトタイプ**であり、以下を最優先します：
- ✅ 動作する最小限の機能
- ✅ シンプルで理解しやすいコード
- ✅ 迅速な開発サイクル
- ❌ 過剰な最適化
- ❌ 複雑な設計パターン

## 2. 基本原則

常に以下の基本的な考え方を念頭に置いて開発を行います。

### KISS (Keep It Simple, Stupid)
- 複雑さを避け、可能な限りシンプルで理解しやすい設計・実装を心がけます。
- 不必要に凝った解決策よりも、簡潔で直接的なアプローチを優先します。
- **プロトタイプでは特に重要**: 最小限のコードで動作することを最優先します。

### DRY (Don't Repeat Yourself)
- 同じ情報やロジックの繰り返しを避け、一元的に管理します。
- コードの重複はバグの温床となるため、関数化、モジュール化を活用して共通化を図ります。
- ただし、プロトタイプでは**過度な抽象化よりも明確さを優先**します。

### YAGNI (You Ain't Gonna Need It)
- 現時点で明確な要求がない機能や、将来的に必要になるかもしれないという憶測に基づく過剰な設計・実装は行いません。
- まずは現在の要求を満たす最小限の機能を実装し、必要に応じて拡張します。
- **プロトタイプの核心原則**: Issueに記載された機能のみ実装します。

## 3. SOLID原則（簡易版）

プロトタイプでは完全なSOLID原則の適用は求めませんが、以下の考え方を参考にします。

### 単一責任の原則 (SRP: Single Responsibility Principle)
- 各コンポーネント、関数は、ただ一つの責任（機能や関心事）だけを持つべきです。
- 例: `ARArrow.tsx` は矢印の表示のみを担当し、他の機能は含めません。

### その他のSOLID原則
- プロトタイプでは厳密な適用は求めませんが、意識することで保守性が向上します。
- 詳細は必要に応じて後から適用します。

## 4. Remote Visual Guidance固有の原則

### 最小限の実装
- **Issue駆動**: Issueに記載された機能のみ実装します。
- **追加機能禁止**: Issue範囲外の機能追加は行いません。
- **過剰な最適化禁止**: 動作することを最優先し、パフォーマンス最適化は最小限に留めます。

### A-Frame / AR.js特有の考慮事項
- **宣言的な記述**: A-Frameの宣言的なJSX記法を活用します。
- **動的ロード**: A-Frame/AR.jsはCDN経由で動的にロードし、SSR時のエラーを回避します。
- **文字列形式**: position/rotationは文字列形式（"0 1 0"）で扱います。

### Reactコンポーネントの設計
- **Client Components**: A-Frameを使用するコンポーネントは必ず`"use client"`ディレクティブを使用します。
- **単一責任**: 各コンポーネントは一つの機能のみを担当します。
- **Propsの明確性**: インターフェースで明確に型定義します。

## 5. その他の重要な考慮事項

### コードの可読性 (Readability)
- 変数名、関数名、コンポーネント名などは、その役割が明確にわかるように適切に命名します。
- 複雑なロジックや意図が伝わりにくい箇所には、適切なコメントを付与します。
- 一貫性のあるインデントスタイルやフォーマットを維持します。

### モジュール性 (Modularity)
- 関連性の高い機能やデータをグループ化し、適切にモジュール分割します。
- 各モジュールは疎結合（お互いの依存度が低い状態）を目指し、再利用性や独立性を高めます。

### エラーハンドリング (Error Handling)
- 予期せぬエラーが発生した場合でも、システムが安全に停止または継続できるように、堅牢なエラー処理を実装します。
- プロトタイプでは簡易的なエラーハンドリング（alertなど）で十分です。

## 6. プロトタイプ開発のベストプラクティス

### やるべきこと
- ✅ Issueに記載された完了条件をすべて満たす
- ✅ TypeScriptのコンパイルエラーをゼロにする
- ✅ 基本的な動作確認を行う
- ✅ シンプルで読みやすいコードを書く

### やらないこと
- ❌ Issue範囲外の機能追加
- ❌ 過剰な最適化
- ❌ 複雑な設計パターンの適用
- ❌ 完璧を目指した実装

## 7. おわりに

ここに挙げた原則は、プロトタイプ開発における指針です。
**最小限の実装で動作する**ことを最優先し、将来的な拡張は必要に応じて行います。

常にこれらの原則を意識し、シンプルで保守しやすいコードを目指していくことが重要です。
